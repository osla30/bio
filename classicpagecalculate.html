<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>經典SDS-PAGE鑄膠計算器 | Classic SDS-PAGE Gel Calculator</title>
<style>
  body { font-family: Arial, sans-serif; max-width: 700px; margin: 20px auto; padding: 10px; }
  
  .header-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
  }
  
  h1 { 
    display: flex; 
    align-items: center; 
    margin: 0;
    flex-grow: 1;
  }
  
  #download-btn {
    margin-left: 20px;
    font-size: 14px;
    padding: 4px 12px;
    border-radius: 5px;
    border: 1px solid #888;
    background: #f0f0f0;
    cursor: pointer;
    text-decoration: none;
    color: #222;
    transition: background 0.2s;
  }
  
  #download-btn:hover {
    background: #e0e0e0;
  }
  
  .language-toggle {
    display: flex;
    border: 1px solid #ccc;
    border-radius: 5px;
    overflow: hidden;
    background: #f9f9f9;
  }
  
  .language-toggle button {
    padding: 8px 12px;
    border: none;
    background: transparent;
    cursor: pointer;
    font-size: 14px;
    transition: background 0.2s;
    margin: 0;
  }
  
  .language-toggle button.active {
    background: #007bff;
    color: white;
  }
  
  .language-toggle button:hover:not(.active) {
    background: #e9ecef;
  }
  
  h2 { border-bottom: 2px solid #333; padding-bottom: 5px; }
  label { display: inline-block; width: 160px; margin-top: 8px; }
  input[type="number"] { width: 100px; padding: 4px; }
  .section { margin-bottom: 30px; }
  .result { margin-top: 10px; }
  .result span { display: inline-block; width: 180px; }
  .total-row { font-weight: bold; color: red; }
  button { margin-top: 15px; padding: 8px 16px; font-size: 16px; margin-right: 10px; }
  
  .lang-zh { display: block; }
  .lang-en { display: none; }
  
  body.english .lang-zh { display: none; }
  body.english .lang-en { display: block; }
</style>
</head>
<body>

<div class="header-container">
  <h1>
    <span class="lang-zh">經典SDS-PAGE鑄膠計算器</span>
    <span class="lang-en">Classic SDS-PAGE Gel Calculator</span>
    <a id="download-btn" href="https://drive.google.com/file/d/1ZLQd56OE7CVXiFUrnERnXkaphBQvVx7e/view?usp=sharing" target="_blank" rel="noopener noreferrer">
      <span class="lang-zh">下載離線版</span>
      <span class="lang-en">Download Offline</span>
    </a>
  </h1>
  <div class="language-toggle">
    <button id="btn-zh" class="active" onclick="switchLanguage('zh')">中文</button>
    <button id="btn-en" onclick="switchLanguage('en')">English</button>
  </div>
</div>

<div class="section" id="stacking-gel">
  <h2>
    <span class="lang-zh">上膠 (Stacking Gel)</span>
    <span class="lang-en">Stacking Gel</span>
  </h2>
  <div>
    <label for="upper-percent">
      <span class="lang-zh">上膠%數 (%)</span>
      <span class="lang-en">Gel Percentage (%)</span>
    </label>
    <input type="number" id="upper-percent" min="0" step="0.1" />
  </div>
  <div>
    <label for="upper-volume">
      <span class="lang-zh">上膠體積 (mL)</span>
      <span class="lang-en">Gel Volume (mL)</span>
    </label>
    <input type="number" id="upper-volume" min="0" step="0.1" />
  </div>
  <div>
    <label for="upper-count">
      <span class="lang-zh">所需份數</span>
      <span class="lang-en">Number of Gels</span>
    </label>
    <input type="number" id="upper-count" min="0" step="0.01" />
  </div>
  <button onclick="calculateUpperGel()">
    <span class="lang-zh">計算上膠配方</span>
    <span class="lang-en">Calculate Recipe</span>
  </button>
  <button onclick="clearUpperInputs()">
    <span class="lang-zh">清除</span>
    <span class="lang-en">Clear</span>
  </button>

  <div class="result" id="upper-results" style="display:none;">
    <p><span>30% Acrylamide:</span><span id="upper-acrylamide"></span> mL</p>
    <p><span>ddH₂O:</span><span id="upper-ddH₂O"></span> mL</p>
    <p><span>0.5M Tris (pH6.8):</span><span id="upper-gelsolution"></span> mL</p>
    <p><span>10% SDS:</span><span id="upper-sds"></span> µL</p>
    <p><span>TEMED:</span><span id="upper-temed"></span> µL</p>
    <p><span>10% APS:</span><span id="upper-aps"></span> µL</p>
    <p class="total-row"><span>Total:</span><span id="upper-total"></span> mL</p>
  </div>
</div>

<div class="section" id="resolving-gel">
  <h2>
    <span class="lang-zh">下膠 (Resolving Gel)</span>
    <span class="lang-en">Resolving Gel</span>
  </h2>
  <div>
    <label for="lower-percent">
      <span class="lang-zh">下膠%數 (%)</span>
      <span class="lang-en">Gel Percentage (%)</span>
    </label>
    <input type="number" id="lower-percent" min="0" step="0.1" />
  </div>
  <div>
    <label for="lower-volume">
      <span class="lang-zh">下膠體積 (mL)</span>
      <span class="lang-en">Gel Volume (mL)</span>
    </label>
    <input type="number" id="lower-volume" min="0" step="0.1" />
  </div>
  <div>
    <label for="lower-count">
      <span class="lang-zh">所需份數</span>
      <span class="lang-en">Number of Gels</span>
    </label>
    <input type="number" id="lower-count" min="0" step="0.01" />
  </div>
  <button onclick="calculateLowerGel()">
    <span class="lang-zh">計算下膠配方</span>
    <span class="lang-en">Calculate Recipe</span>
  </button>
  <button onclick="clearLowerInputs()">
    <span class="lang-zh">清除</span>
    <span class="lang-en">Clear</span>
  </button>

  <div class="result" id="lower-results" style="display:none;">
    <p><span>30% Acrylamide:</span><span id="lower-acrylamide"></span> mL</p>
    <p><span>ddH₂O:</span><span id="lower-ddH₂O"></span> mL</p>
    <p><span>1.5M Tris (pH8.8):</span><span id="lower-gelsolution"></span> mL</p>
    <p><span>10% SDS:</span><span id="lower-sds"></span> µL</p>
    <p><span>TEMED:</span><span id="lower-temed"></span> µL</p>
    <p><span>10% APS:</span><span id="lower-aps"></span> µL</p>
    <p class="total-row"><span>Total:</span><span id="lower-total"></span> mL</p>
  </div>
</div>

<script>
function toFixedNumber(num, digits) {
  return Number.parseFloat(num).toFixed(digits);
}

function switchLanguage(lang) {
  const body = document.body;
  const btnZh = document.getElementById('btn-zh');
  const btnEn = document.getElementById('btn-en');
  
  if (lang === 'en') {
    body.classList.add('english');
    btnZh.classList.remove('active');
    btnEn.classList.add('active');
    document.documentElement.lang = 'en';
  } else {
    body.classList.remove('english');
    btnZh.classList.add('active');
    btnEn.classList.remove('active');
    document.documentElement.lang = 'zh-Hant';
  }
  
  // 不保存語言選擇，每次打開都預設中文
}

// 頁面加載時預設為中文
window.addEventListener('load', function() {
  switchLanguage('zh');
});

function calculateUpperGel() {
  const A = parseFloat(document.getElementById('upper-percent').value);
  const B = parseFloat(document.getElementById('upper-volume').value);
  const C = parseFloat(document.getElementById('upper-count').value);

  const isEnglish = document.body.classList.contains('english');
  const alertMessage = isEnglish ? 
    'Please enter valid parameters for stacking gel (all positive numbers)' :
    '請輸入有效的上膠參數（皆為正數）';

  if (isNaN(A) || isNaN(B) || isNaN(C) || A <= 0 || B <= 0 || C <= 0) {
    alert(alertMessage);
    return;
  }

  const D = ((A * 2) / 30) * (B / 2) * C;             // 30% Acrylamide
  const E = (B / 4) * C;                              // 0.5M Tris (pH6.8)
  const F = (B * C) - D - E - ((B * C) / 100);        // ddH₂O
  const J = (B * C) * 10;                             // 10% SDS
  const G = B * C;                                    // TEMED
  const H = (B * 5) * C;                              // 10% APS
  const I = B * C;                                    // Total

  document.getElementById('upper-acrylamide').textContent = toFixedNumber(D, 3);
  document.getElementById('upper-ddH₂O').textContent = toFixedNumber(F, 3);
  document.getElementById('upper-gelsolution').textContent = toFixedNumber(E, 3);
  document.getElementById('upper-sds').textContent = toFixedNumber(J, 1);
  document.getElementById('upper-temed').textContent = toFixedNumber(G, 1);
  document.getElementById('upper-aps').textContent = toFixedNumber(H, 1);
  document.getElementById('upper-total').textContent = toFixedNumber(I, 3);

  document.getElementById('upper-results').style.display = 'block';
}

function calculateLowerGel() {
  const a = parseFloat(document.getElementById('lower-percent').value);
  const b = parseFloat(document.getElementById('lower-volume').value);
  const c = parseFloat(document.getElementById('lower-count').value);

  const isEnglish = document.body.classList.contains('english');
  const alertMessage = isEnglish ? 
    'Please enter valid parameters for resolving gel (all positive numbers)' :
    '請輸入有效的下膠參數（皆為正數）';

  if (isNaN(a) || isNaN(b) || isNaN(c) || a <= 0 || b <= 0 || c <= 0) {
    alert(alertMessage);
    return;
  }

  const d = ((a * 2) / 30) * (b / 2) * c;             // 30% Acrylamide
  const e = (b / 4) * c;                              // 1.5M Tris (pH8.8)
  const f = (b * c) - d - e - ((b * c) / 100);        // ddH₂O
  const j = (b * c) * 10;                             // 10% SDS
  const g = (b / 2) * c;                              // TEMED (修改公式)
  const h = (b * 5) * c;                              // 10% APS
  const i = b * c;                                    // Total

  document.getElementById('lower-acrylamide').textContent = toFixedNumber(d, 3);
  document.getElementById('lower-ddH₂O').textContent = toFixedNumber(f, 3);
  document.getElementById('lower-gelsolution').textContent = toFixedNumber(e, 3);
  document.getElementById('lower-sds').textContent = toFixedNumber(j, 1);
  document.getElementById('lower-temed').textContent = toFixedNumber(g, 1);
  document.getElementById('lower-aps').textContent = toFixedNumber(h, 1);
  document.getElementById('lower-total').textContent = toFixedNumber(i, 3);

  document.getElementById('lower-results').style.display = 'block';
}

function clearUpperInputs() {
  document.getElementById('upper-percent').value = '';
  document.getElementById('upper-volume').value = '';
  document.getElementById('upper-count').value = '';
  document.getElementById('upper-results').style.display = 'none';
}

function clearLowerInputs() {
  document.getElementById('lower-percent').value = '';
  document.getElementById('lower-volume').value = '';
  document.getElementById('lower-count').value = '';
  document.getElementById('lower-results').style.display = 'none';
}
</script>

</body>
</html>